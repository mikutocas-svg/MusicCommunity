<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>éŸ³ã‚³ãƒŸãƒ¥ï¼ Ultimate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { -webkit-tap-highlight-color: transparent; font-family: sans-serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        input, textarea { font-size: 16px !important; }
        .post-img { max-height: 250px; object-fit: cover; border-radius: 1rem; width: 100%; margin-top: 0.5rem; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen text-gray-800 pb-safe">

    <div id="setup-view" class="hidden fixed inset-0 bg-indigo-700 z-[100] flex flex-col items-center justify-center p-8 text-white text-center">
        <h1 class="text-4xl font-black mb-4 italic">éŸ³ã‚³ãƒŸãƒ¥ï¼</h1>
        <p class="mb-8 opacity-80 text-sm">ã‚ãªãŸã®éŸ³æ¥½ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’ã¯ã˜ã‚ã‚ˆã†</p>
        <input id="user-name-input" type="text" placeholder="ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ " class="w-full max-w-xs p-4 rounded-2xl text-gray-900 text-center text-xl font-bold mb-6 outline-none shadow-2xl">
        <button id="btn-register" class="w-full max-w-xs bg-white text-indigo-700 py-4 rounded-2xl font-black text-xl shadow-lg active:scale-95 transition-transform">ã¯ã˜ã‚ã‚‹</button>
    </div>

    <div id="home-view" class="p-6">
        <div class="flex justify-between items-center mb-10">
            <div>
                <h1 class="text-3xl font-black text-indigo-700 italic">éŸ³ã‚³ãƒŸãƒ¥ï¼</h1>
                <p id="display-user-name" class="font-bold text-gray-500 mt-1 text-sm">Loading...</p>
            </div>
            <div id="header-icon-area"></div>
        </div>

        <div class="grid grid-cols-1 gap-4">
            <button onclick="window.changeMode('lounge')" class="bg-white p-6 rounded-3xl shadow-sm border border-indigo-50 flex items-center gap-4 active:scale-95 transition-all">
                <span class="text-3xl">â˜•ï¸</span>
                <div class="text-left"><div class="text-xl font-black text-gray-800">ãƒ©ã‚¦ãƒ³ã‚¸</div><div class="text-xs text-gray-400">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é›‘è«‡</div></div>
            </button>
            <button onclick="window.changeMode('talk')" class="bg-white p-6 rounded-3xl shadow-sm border border-indigo-50 flex items-center gap-4 active:scale-95 transition-all">
                <span class="text-3xl">ğŸ—£ï¸</span>
                <div class="text-left"><div class="text-xl font-black text-gray-800">ç›¸è«‡æ‰€</div><div class="text-xs text-gray-400">ãŠæ‚©ã¿ãƒ»è³ªå•æ¿</div></div>
            </button>
            <button onclick="window.changeMode('band')" class="bg-white p-6 rounded-3xl shadow-sm border border-indigo-50 flex items-center gap-4 active:scale-95 transition-all">
                <span class="text-3xl">ğŸ¸</span>
                <div class="text-left"><div class="text-xl font-black text-gray-800">ãƒãƒ³ãƒ‰çµæˆ</div><div class="text-xs text-gray-400">ãƒ¡ãƒ³ãƒãƒ¼ãƒ»ãƒ‘ãƒ¼ãƒˆå‹Ÿé›†</div></div>
            </button>
        </div>
    </div>

    <div id="app-view" class="hidden min-h-screen flex flex-col bg-gray-50">
        <header class="bg-white/95 backdrop-blur-md sticky top-0 z-50 px-4 py-3 border-b flex justify-between items-center shadow-sm h-16">
            <button onclick="window.goHome()" class="text-indigo-600 font-bold text-2xl w-10 h-10 flex items-center justify-center active:bg-gray-100 rounded-full">ğŸ </button>
            <h2 id="page-title" class="font-black text-indigo-700 text-lg truncate px-2"></h2>
            <div class="w-10"></div>
        </header>

        <main class="flex-1 p-4 pb-40 w-full overflow-x-hidden">
            <div id="lounge-view" class="hidden space-y-4"></div>
            <div id="thread-list-view" class="hidden space-y-3"></div>
            <div id="chat-view" class="hidden w-full space-y-4"><div id="message-list" class="space-y-4"></div></div>
            <div id="mypage-view" class="hidden">
                <div id="mypage-header" class="bg-white rounded-3xl p-6 shadow-sm border border-indigo-50 mb-6"></div>
                <div id="mypage-content" class="space-y-3"></div>
            </div>
            <div id="user-list-view" class="hidden space-y-3"></div>
        </main>

        <div id="bottom-input-area" class="hidden fixed bottom-0 left-0 w-full bg-white/90 backdrop-blur-md p-3 border-t z-40 pb-10">
            <div class="max-w-2xl mx-auto flex flex-col gap-2">
                <div id="img-preview-area" class="hidden relative w-20 h-20">
                    <img id="img-preview" class="w-20 h-20 object-cover rounded-xl border shadow-sm">
                    <button onclick="window.clearImage()" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 text-[10px]">âœ•</button>
                </div>
                <div class="flex gap-2 items-center">
                    <label class="cursor-pointer bg-gray-100 p-3 rounded-full active:scale-90 transition-transform">
                        <span>ğŸ“·</span>
                        <input type="file" id="img-input" accept="image/*" class="hidden" onchange="window.previewImage(this)">
                    </label>
                    <input id="main-input" type="text" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..." class="flex-1 bg-gray-50 border-0 rounded-full px-5 py-3 text-sm focus:ring-2 focus:ring-indigo-500 outline-none">
                    <button id="btn-send" class="bg-indigo-600 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold shadow-lg active:scale-90 transition-transform flex-shrink-0">â†‘</button>
                </div>
            </div>
        </div>

        <button id="fab" onclick="window.toggleThreadModal(true)" class="hidden fixed bottom-32 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-xl flex items-center justify-center text-3xl z-40 active:scale-90 transition-transform">ï¼‹</button>
    </div>

    <div id="thread-modal" class="hidden fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-6 backdrop-blur-sm">
        <div class="bg-white w-full max-w-sm rounded-3xl p-8 space-y-4 shadow-2xl text-center">
            <h3 class="text-xl font-black text-gray-800">æ–°ã—ã„è©±é¡Œã‚’ä½œã‚‹</h3>
            <input id="thread-input" type="text" class="w-full bg-gray-50 border-0 rounded-2xl px-4 py-4 outline-none focus:ring-2 focus:ring-indigo-500" placeholder="ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
            <div class="flex gap-3 pt-4">
                <button onclick="window.toggleThreadModal(false)" class="flex-1 py-4 bg-gray-100 rounded-2xl font-bold text-gray-500">ã‚„ã‚ã‚‹</button>
                <button id="btn-create-thread" class="flex-1 py-4 bg-indigo-600 text-white rounded-2xl font-bold shadow-lg">ä½œæˆï¼</button>
            </div>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
